## О приложении
Настоящее приложение представляет собой *backend*-обработчик входящих *HTTP*-запросов от приложения [*FRONT*](FRONT/netology-diplom-frontend). Назначение - сетевое хранилище пользовательских файлов с привязкой к владельцу.

## Параметры запуска
Порт запуска приложения *FRONT*: **8080**
Точка входа на сервер: `http://localhost:8081/cloud/`

## Запросы
### Спецификация
Спецификация *HTTP*-запросов и ответов представлена [здесь](FRONT/CloudServiceSpecification.yaml]). Их описание ниже.

### Допустимые типы запросов и их назначение
1. **Регистрация/вход пользователя:**
+ Точка входа:	`.../login`
+ Тип запроса:	*POST*
+ Формат запроса: *application/json*
+ Содержание запроса:	логин/пароль
+ Аутентификация: не требуется
+ Формат ответа: *application/json*
+ Содержание ответа:	токен аутентификации
+ Описание:	<br>При некорректном вводе полей возвращается статус *400* (*bad request*). Логин должен соответствовать регулярному выражению `^[A-z]+[\\w\\.@-]+[A-z\\d]+$` и быть длиной от 1 до 32 символов. Пароль должен соответствовать регулярному выражению `[\\w\\.-]+` и быть длиной от 6 до 64 символов. При корректном запросе производится поиск пользователя с указанным *email* (логином)  в базе данных пользователей. В случае нахождения производится сверка хэшей сохраненного и введенного паролей. При расхождении хэшей запрос отклоняется со статусом ответа *401* (*unauthorized*). При совпадении данных возвращается в теле ответа токен аутентификации этого пользователя с временем действия 2 часа. При отсутствии пользователя с таким логином перед ответом создаётся соответствующая запись в базе данных. Все прочие запросы должны передаваться с заголовком *auth-token* и полученным значением пользовательского токена аутентификации.
2. **Запись файла в хранилище:**
+ Точка входа:	`.../file?filename={filename}`
+ Тип запроса:	*POST*
+ Формат запроса: *multipart/form-data*
+ Содержание запроса:	хэш файла/файл в двоичном виде
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа: *application/json*
+ Содержание ответа:	нет
+ Описание:	<br>При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). Имя сохраняемого файла *{filename}* должно соответствовать регулярному выражению `[()А-я\\w\\s\\.,-]+` и быть длиной от 1 до 64 символов. Хэш должен быть представлен строкой из латинских букв и/или цифр. Файл должен быть передан строкой, содержащей только символы 0, 1 и пробелы. При некорректном вводе полей или обнаружении в базе данных файлов соответствующей пары *[login-filename]* возвращается статус *400* (*bad request*).  При отсутствии в базе данных сетевого хранилища файла с указанным именем для этого пользователя база обновляется соответствующей записью, а пользователю возвращается пустой ответ со статусом *200* (*OK*).
3. **Чтение файла из хранилища:**
+ Точка входа:	`.../file?filename={filename}`
+ Тип запроса:	*GET*
+ Формат запроса: *application/json*
+ Содержание запроса:		нет
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа:	*multipart/form-data* (или *application/json* при ошибках)
+ Содержание ответа:	хэш файла/файл в двоичном виде
+ Описание:	<br>При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). Имя загружаемого файла *{filename}* должно соответствовать регулярному выражению `[()А-я\\w\\s\\.,-]+` и быть длиной от 1 до 64 символов. При некорректном вводе или отсутствии в базе данных файлов соответствующей пары *[login-filename]* возвращается статус *400* (*bad request*).  При обнаружении в базе данных сетевого хранилища файла с указанным именем для этого пользователя файл возвращается пользователю в виде *multipart/form-data* со статусом *200* (*OK*).
4. **Переименование файла в хранилище:**
+ Точка входа:	`.../file?filename={filename}`
+ Тип запроса:	*PUT*
+ Формат запроса: *application/json*
+ Содержание запроса:	новое имя *{new_filename}*
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа:	*application/json*
+ Содержание ответа:	нет
+ Описание:	<br>При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). Текущее *{filename}* и новое имена файла должны соответствовать регулярному выражению `[()А-я\\w\\s\\.,-]+` и быть длиной от 1 до 64 символов. При некорректном вводе, отсутствии в базе данных файла соответствующей пары *[login-filename]* или обнаружении в базе пары *[login-new_filename]* возвращается статус *400* (*bad request*).  В противном случае поле имени файла в базе данных файлового хранилища обновляется, фиксируется время обновления файла и возвращается пустой ответ со статусом *200* (*OK*).
5. **Чтение списка файлов из хранилища:**
+ Точка входа:	`.../list?limit={limit}`
+ Тип запроса:	*GET*
+ Формат запроса: *application/json*
+ Содержание запроса:	нет
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа:	*application/json*
+ Содержание ответа:	список из *{limit}* пар имя-размер файлов
+ Описание:
  При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). Запрашиваемый размер списка должен представлять числовое положительное значение . При некорректном вводе, отсутствии в базе данных количества *{limit}* файлов соответствующей пары *[login-filename]* возвращается статус *400* (*bad request*).  В противном случае пользователю возвращается список из *{limit}* *json*-объектов в виде пар имя-размер (байт) файлов, привязанных к владельцу токена аутентификации, со статусом *200* (*OK*).
6. **Удаление файла из хранилища:**
+ Точка входа:	`.../file?filename={filename}`
+ Тип запроса:	*DELETE*
+ Формат запроса: *application/json*
+ Содержание запроса:	нет
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа:	*application/json*
+ Содержание ответа:	нет
+ Описание:	<br>При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). Имя файла *{filename}* должно соответствовать регулярному выражению `[()А-я\\w\\s\\.,-]+` и быть длиной от 1 до 64 символов. При некорректном вводе или отсутствии в базе данных файла соответствующей пары *[login-filename]* возвращается статус *400* (*bad request*).  В противном случае в базе данных файлового хранилища удаляется файл с ключом *[login-filename]* и возвращается пустой ответ со статусом *200* (*OK*).
7. **Выход пользователя (отключение):**
+ Точка входа:	`.../logout`
+ Тип запроса:	*POST*
+ Формат запроса: *application/json*
+ Содержание запроса:	нет
+ Аутентификация:	заголовок запроса *auth-token* со значением токена активного пользователя
+ Формат ответа:	*application/json*
+ Содержание ответа:	нет
+ Описание:	<br>При отсутствии заголовка запроса *auth-token* или некорректном его значении возвращается *401* (*unauthorized*). При отсутствии в базе данных пользователей имени*[login]* возвращается статус *400* (*bad request*).  В противном случае возвращается пустой ответ со статусом *200* (*OK*). Ответственность за сброс токена аутентификации передаётся приложению *FRONT*.